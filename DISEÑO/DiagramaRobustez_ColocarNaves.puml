@startuml DiagramaRobustez_ColocarNaves

title Diagrama de Robustez - CU04: Colocar Naves

skinparam backgroundColor White

' ==================== ACTOR ====================
actor "Jugador" as jugador

' ==================== BOUNDARY (Azul) ====================
rectangle "FrmColocarNaves" as frmColocar #LightBlue
rectangle "CasillaButton" as casilla #LightBlue
rectangle "FrmPartidaEnCurso" as frmPartida #LightBlue

' ==================== CONTROL (Amarillo) ====================
rectangle "ControlVista" as cv #LightYellow
rectangle "Controlador" as ctrl #LightYellow
rectangle "ControlModelo" as modelo #LightYellow
rectangle "BusEventos" as bus #LightYellow
rectangle "GestorPartida" as gestor #LightYellow

' ==================== ENTITY (Verde) ====================
rectangle "NaveDTO" as naveDto #LightGreen
rectangle "CoordenadasDTO" as coordDto #LightGreen
rectangle "AddNaveDTO" as addNaveDto #LightGreen
rectangle "Tablero" as tablero #LightGreen

' ==================== FLUJO COLOCAR ====================
jugador --> frmColocar : 1. Selecciona nave
jugador --> casilla : 2. Click casilla
casilla --> cv : 3. addNave(nave, coords)
cv --> modelo : 4. validar local
modelo --> addNaveDto : 5. new AddNaveDTO()
cv --> ctrl : 6. addNave()
ctrl --> bus : 7. ADD_NAVE
bus --> gestor : 8. procesarAddNave()
gestor --> gestor : 9. verificarSolapamiento()
gestor --> gestor : 10. verificarAdyacencia()
gestor --> tablero : 11. Guardar nave
bus --> ctrl : 12. RESULTADO_ADD_NAVE
ctrl --> cv : 13. NAVE_ANADIDA
cv --> frmColocar : 14. Pintar nave

' ==================== FLUJO CONFIRMAR ====================
jugador --> frmColocar : 15. Click Confirmar
frmColocar --> cv : 16. confirmarTablero()
cv --> ctrl : 17. confirmarTablero()
ctrl --> bus : 18. CONFIRMAR_TABLERO
bus --> gestor : 19. procesarConfirmarTablero()
bus --> ctrl : 20. TABLEROS_LISTOS
cv --> frmPartida : 21. Navegar a batalla

' ==================== NOTAS ====================
note right of gestor
  **Validaciones:**
  - No solapamiento
  - No adyacencia (8 dirs)

  **Errores:**
  - ESPACIO_YA_OCUPADO
  - NAVE_ADYACENTE
end note

note bottom of frmColocar
  **Naves a colocar:**
  2 PortaAviones (4)
  2 Cruceros (3)
  4 Submarinos (2)
  3 Barcos (1)
  Total: 11 naves
end note

legend right
  |= Color |= Tipo |
  |<#LightBlue> Azul </color>| Boundary |
  |<#LightYellow> Amarillo </color>| Control |
  |<#LightGreen> Verde </color>| Entity |
endlegend

@enduml
